<main>
  <header id="channel-header" {{action "menu" "global" "toggle"}} onClick="">
    <h2 id="channel-name" class="{{if channel.connected "connected" "disconnected"}}">{{channel.name}}</h2>
    <p id="channel-title">{{channel.formattedTopic}}</p>
    <nav>
      <a href="#"><i class="icon-megaphone"></i></a><a href="#"><i class="icon-mute"></i></a>
    </nav>
  </header>

  <section id="channel-content" class="main">
    {{#if channel.isLogged}}
      <a {{action "loadPreviousMessages"}} class="load-previous">
        Load previous messages
      </a>
    {{/if}}

    <ul>
      {{#each channel.sortedMessages as |message|}}
        <li>
          {{component message.type message=message}}
        </li>
      {{else}}
        {{#if channel.isLogged}}
          <li class="no-messages discreet">No recent messages to display.</li>
        {{else}}
          <li class="no-messages discreet">No Kosmos logs configured for this channel. <a href="https://wiki.kosmos.org/Setting_up_channel_logs" target="_blank">Learn more</a></li>
        {{/if}}
      {{/each}}
    </ul>
  </section>

  <footer>
    <section id="new-message">
      <form {{action "processMessageOrCommand" on="submit"}}>
        {{channel-input-field value=newMessage
                              placeholder="Type a message and hit enter"
                              name="chat-message"
                              id="message-field"
                              autocomplete="off"}}
      </form>
    </section>
  </footer>
</main>

<aside>
  <header>
    <nav>
      {{#link-to 'index' class='active'}}<i class="icon-users"></i>{{/link-to}}<a href="#"><i class="icon-paperclip"></i></a>{{#link-to 'settings'}}<i class="icon-cog"></i>{{/link-to}}<a href="#"><i class="icon-resize-enlarge"></i></a>
    </nav>
  </header>
  <section id="user-list" class="main">
    <ul>
      {{#each channel.userList as |username|}}
      <li>{{link-to-username username=username}}</li>
      {{/each}}
    </ul>
  </section>
</aside>
